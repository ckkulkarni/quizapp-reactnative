{"version":3,"names":["_react","require","_reactNative","_calculateDropdownHeight","_useKeyboardRemainingScreenHeight","_Dimensions$get","Dimensions","get","height","useLayoutDropdown","data","dropdownStyle","rowStyle","search","_useState","useState","_useState2","_slicedToArray2","default","isVisible","setIsVisible","_useState3","_useState4","buttonLayout","setButtonLayout","_useState5","_useState6","dropdownPX","setDropdownPX","_useState7","_useState8","dropdownPY","setDropdownPY","_useState9","calculateDropdownHeight","length","_useState10","dropdownHEIGHT","setDropdownHEIGHT","_useState11","_useState12","dropdownWIDTH","setDropdownWIDTH","remainigHeightAvoidKeyboard","useKeyboardRemainingScreenHeight","safeDropdownViewUnderKeyboard","useEffect","onDropdownButtonLayout","w","h","px","py","width","getItemLayout","flatlistData","index","offset","dropdownWindowStyle","useMemo","top","Object","assign","borderTopWidth","overflow","position","I18nManager","isRTL","right","left","exports"],"sources":["useLayoutDropdown.js"],"sourcesContent":["import {useEffect, useState, useMemo} from 'react';\nimport {I18nManager, Dimensions} from 'react-native';\nimport {calculateDropdownHeight} from '../helpers/calculateDropdownHeight';\nimport {useKeyboardRemainingScreenHeight} from './useKeyboardRemainingScreenHeight';\nconst {height} = Dimensions.get('window');\n\nexport const useLayoutDropdown = (data, dropdownStyle, rowStyle, search) => {\n  const [isVisible, setIsVisible] = useState(false); // dropdown visible ?\n  const [buttonLayout, setButtonLayout] = useState(null);\n  const [dropdownPX, setDropdownPX] = useState(0); // position x\n  const [dropdownPY, setDropdownPY] = useState(0); // position y\n  const [dropdownHEIGHT, setDropdownHEIGHT] = useState(() => {\n    return calculateDropdownHeight(dropdownStyle, rowStyle, data?.length || 0, search);\n  }); // dropdown height\n  const [dropdownWIDTH, setDropdownWIDTH] = useState(0); // dropdown width\n  const remainigHeightAvoidKeyboard = useKeyboardRemainingScreenHeight();\n  const safeDropdownViewUnderKeyboard = rowStyle && rowStyle.height ? rowStyle.height * 3 : 50 * 3;\n\n  useEffect(() => {\n    setDropdownHEIGHT(calculateDropdownHeight(dropdownStyle, rowStyle, data?.length || 0, search));\n  }, [dropdownStyle, rowStyle, data]);\n\n  const onDropdownButtonLayout = (w, h, px, py) => {\n    setButtonLayout({w, h, px, py});\n    if (height - 18 < py + h + dropdownHEIGHT) {\n      setDropdownPX(px);\n      setDropdownPY(py - 2 - dropdownHEIGHT);\n    } else {\n      setDropdownPX(px);\n      setDropdownPY(py + h + 2);\n    }\n    setDropdownWIDTH(dropdownStyle?.width || w);\n  };\n\n  const getItemLayout = (flatlistData, index) => ({\n    index,\n    length: flatlistData?.length || 0,\n    offset: rowStyle && rowStyle.height ? rowStyle.height * index : 50 * index,\n  });\n\n  const dropdownWindowStyle = useMemo(() => {\n    const top =\n      remainigHeightAvoidKeyboard < dropdownPY + safeDropdownViewUnderKeyboard\n        ? remainigHeightAvoidKeyboard - safeDropdownViewUnderKeyboard\n        : dropdownPY;\n    return {\n      ...{\n        borderTopWidth: 0,\n        overflow: 'hidden',\n      },\n      ...dropdownStyle,\n      ...{\n        position: 'absolute',\n        top: top,\n        height: dropdownHEIGHT,\n        width: dropdownWIDTH,\n      },\n      ...(I18nManager.isRTL ? {right: dropdownStyle?.right || dropdownPX} : {left: dropdownStyle?.left || dropdownPX}),\n    };\n  }, [dropdownStyle, remainigHeightAvoidKeyboard, dropdownPX, dropdownPY, dropdownHEIGHT, dropdownWIDTH]);\n\n  return {\n    isVisible,\n    setIsVisible,\n    buttonLayout,\n    onDropdownButtonLayout,\n    getItemLayout,\n    dropdownWindowStyle,\n  };\n};\n"],"mappings":"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"}