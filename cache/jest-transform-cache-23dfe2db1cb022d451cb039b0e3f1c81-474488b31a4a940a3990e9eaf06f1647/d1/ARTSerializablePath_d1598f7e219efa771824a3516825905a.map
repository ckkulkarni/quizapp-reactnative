{"version":3,"names":["_class","_interopRequireDefault","require","_path","MOVE_TO","CLOSE","LINE_TO","CURVE_TO","ARC","SerializablePath","Class","Path","initialize","path","reset","slice","push","onReset","onMove","sx","sy","x","y","onLine","onBezierCurve","p1x","p1y","p2x","p2y","_arcToBezier","prototype","onArc","ex","ey","cx","cy","rx","ry","sa","ea","ccw","rotation","onClose","toJSON","_default","exports","default"],"sources":["ARTSerializablePath.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport Class from 'art/core/class';\nimport Path from 'art/core/path';\n\nconst MOVE_TO = 0;\nconst CLOSE = 1;\nconst LINE_TO = 2;\nconst CURVE_TO = 3;\nconst ARC = 4;\n\n// TODO: Refactor to class\nconst SerializablePath = Class(Path, {\n  initialize: function(path: string | SerializablePath) {\n    this.reset();\n    if (path instanceof SerializablePath) {\n      this.path = path.path.slice(0);\n    } else if (path) {\n      this.push(path);\n    }\n  },\n\n  onReset: function() {\n    this.path = [];\n  },\n\n  onMove: function(sx: number, sy: number, x: number, y: number) {\n    this.path.push(MOVE_TO, x, y);\n  },\n\n  onLine: function(sx: number, sy: number, x: number, y: number) {\n    this.path.push(LINE_TO, x, y);\n  },\n\n  onBezierCurve: function(\n    sx: number,\n    sy: number,\n    p1x: number,\n    p1y: number,\n    p2x: number,\n    p2y: number,\n    x: number,\n    y: number,\n  ) {\n    this.path.push(CURVE_TO, p1x, p1y, p2x, p2y, x, y);\n  },\n\n  _arcToBezier: Path.prototype.onArc,\n\n  onArc: function(\n    sx: number,\n    sy: number,\n    ex: number,\n    ey: number,\n    cx: number,\n    cy: number,\n    rx: number,\n    ry: number,\n    sa: number,\n    ea: number,\n    ccw: boolean,\n    rotation: number,\n  ) {\n    if (rx !== ry || rotation) {\n      return this._arcToBezier(\n        sx,\n        sy,\n        ex,\n        ey,\n        cx,\n        cy,\n        rx,\n        ry,\n        sa,\n        ea,\n        ccw,\n        rotation,\n      );\n    }\n    this.path.push(ARC, cx, cy, rx, sa, ea, ccw ? 0 : 1);\n  },\n\n  onClose: function() {\n    this.path.push(CLOSE);\n  },\n\n  toJSON: function() {\n    return this.path;\n  },\n});\n\nexport default SerializablePath;\n"],"mappings":";;;;;AASA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAME,OAAO,GAAG,CAAC;AACjB,IAAMC,KAAK,GAAG,CAAC;AACf,IAAMC,OAAO,GAAG,CAAC;AACjB,IAAMC,QAAQ,GAAG,CAAC;AAClB,IAAMC,GAAG,GAAG,CAAC;AAGb,IAAMC,gBAAgB,GAAG,IAAAC,cAAK,EAACC,aAAI,EAAE;EACnCC,UAAU,EAAE,SAAAA,WAASC,IAA+B,EAAE;IACpD,IAAI,CAACC,KAAK,EAAE;IACZ,IAAID,IAAI,YAAYJ,gBAAgB,EAAE;MACpC,IAAI,CAACI,IAAI,GAAGA,IAAI,CAACA,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC;IAChC,CAAC,MAAM,IAAIF,IAAI,EAAE;MACf,IAAI,CAACG,IAAI,CAACH,IAAI,CAAC;IACjB;EACF,CAAC;EAEDI,OAAO,EAAE,SAAAA,QAAA,EAAW;IAClB,IAAI,CAACJ,IAAI,GAAG,EAAE;EAChB,CAAC;EAEDK,MAAM,EAAE,SAAAA,OAASC,EAAU,EAAEC,EAAU,EAAEC,CAAS,EAAEC,CAAS,EAAE;IAC7D,IAAI,CAACT,IAAI,CAACG,IAAI,CAACZ,OAAO,EAAEiB,CAAC,EAAEC,CAAC,CAAC;EAC/B,CAAC;EAEDC,MAAM,EAAE,SAAAA,OAASJ,EAAU,EAAEC,EAAU,EAAEC,CAAS,EAAEC,CAAS,EAAE;IAC7D,IAAI,CAACT,IAAI,CAACG,IAAI,CAACV,OAAO,EAAEe,CAAC,EAAEC,CAAC,CAAC;EAC/B,CAAC;EAEDE,aAAa,EAAE,SAAAA,cACbL,EAAU,EACVC,EAAU,EACVK,GAAW,EACXC,GAAW,EACXC,GAAW,EACXC,GAAW,EACXP,CAAS,EACTC,CAAS,EACT;IACA,IAAI,CAACT,IAAI,CAACG,IAAI,CAACT,QAAQ,EAAEkB,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEP,CAAC,EAAEC,CAAC,CAAC;EACpD,CAAC;EAEDO,YAAY,EAAElB,aAAI,CAACmB,SAAS,CAACC,KAAK;EAElCA,KAAK,EAAE,SAAAA,MACLZ,EAAU,EACVC,EAAU,EACVY,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,GAAY,EACZC,QAAgB,EAChB;IACA,IAAIL,EAAE,KAAKC,EAAE,IAAII,QAAQ,EAAE;MACzB,OAAO,IAAI,CAACZ,YAAY,CACtBV,EAAE,EACFC,EAAE,EACFY,EAAE,EACFC,EAAE,EACFC,EAAE,EACFC,EAAE,EACFC,EAAE,EACFC,EAAE,EACFC,EAAE,EACFC,EAAE,EACFC,GAAG,EACHC,QAAQ,CACT;IACH;IACA,IAAI,CAAC5B,IAAI,CAACG,IAAI,CAACR,GAAG,EAAE0B,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEE,EAAE,EAAEC,EAAE,EAAEC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;EACtD,CAAC;EAEDE,OAAO,EAAE,SAAAA,QAAA,EAAW;IAClB,IAAI,CAAC7B,IAAI,CAACG,IAAI,CAACX,KAAK,CAAC;EACvB,CAAC;EAEDsC,MAAM,EAAE,SAAAA,OAAA,EAAW;IACjB,OAAO,IAAI,CAAC9B,IAAI;EAClB;AACF,CAAC,CAAC;AAAC,IAAA+B,QAAA,GAEYnC,gBAAgB;AAAAoC,OAAA,CAAAC,OAAA,GAAAF,QAAA"}