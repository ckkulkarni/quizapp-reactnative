6a6d1ce0123c332dd1ce31c9b7da02d9
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useSelectDropdown = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _deepSearchInArr = require("../helpers/deepSearchInArr");
var _findIndexInArr = require("../helpers/findIndexInArr");
var _isExist = require("../helpers/isExist");
var useSelectDropdown = function useSelectDropdown(data, defaultValueByIndex, defaultValue, disabledInternalSearch) {
  var _useState = (0, _react.useState)(null),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    selectedItem = _useState2[0],
    setSelectedItem = _useState2[1];
  var _useState3 = (0, _react.useState)(-1),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    selectedIndex = _useState4[0],
    setSelectedIndex = _useState4[1];
  var _useState5 = (0, _react.useState)(''),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    searchTxt = _useState6[0],
    setSearchTxt = _useState6[1];
  (0, _react.useEffect)(function () {
    if (!data || data.length == 0) {
      reset();
    }
  }, [data]);
  (0, _react.useEffect)(function () {
    if ((0, _isExist.isExist)(defaultValueByIndex)) {
      if (data && (0, _isExist.isExist)(data[defaultValueByIndex])) {
        selectItem(defaultValueByIndex);
      }
    }
  }, [defaultValueByIndex]);
  (0, _react.useEffect)(function () {
    if ((0, _isExist.isExist)(defaultValue)) {
      if (data && (0, _findIndexInArr.findIndexInArr)(defaultValue, data) >= 0) {
        selectItem((0, _findIndexInArr.findIndexInArr)(defaultValue, data));
      }
    }
  }, [defaultValue]);
  var dataArr = (0, _react.useMemo)(function () {
    if (disabledInternalSearch) {
      return data;
    }
    return searchTxt ? (0, _deepSearchInArr.deepSearchInArr)(searchTxt, data) : data;
  }, [data, searchTxt]);
  var selectItem = function selectItem(index) {
    setSelectedItem(data[index]);
    setSelectedIndex(index);
  };
  var reset = function reset() {
    setSelectedItem(null);
    setSelectedIndex(-1);
  };
  return {
    dataArr: dataArr,
    selectedItem: selectedItem,
    selectedIndex: selectedIndex,
    selectItem: selectItem,
    reset: reset,
    searchTxt: searchTxt,
    setSearchTxt: setSearchTxt
  };
};
exports.useSelectDropdown = useSelectDropdown;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2RlZXBTZWFyY2hJbkFyciIsIl9maW5kSW5kZXhJbkFyciIsIl9pc0V4aXN0IiwidXNlU2VsZWN0RHJvcGRvd24iLCJkYXRhIiwiZGVmYXVsdFZhbHVlQnlJbmRleCIsImRlZmF1bHRWYWx1ZSIsImRpc2FibGVkSW50ZXJuYWxTZWFyY2giLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsIl91c2VTdGF0ZTIiLCJfc2xpY2VkVG9BcnJheTIiLCJkZWZhdWx0Iiwic2VsZWN0ZWRJdGVtIiwic2V0U2VsZWN0ZWRJdGVtIiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJzZWxlY3RlZEluZGV4Iiwic2V0U2VsZWN0ZWRJbmRleCIsIl91c2VTdGF0ZTUiLCJfdXNlU3RhdGU2Iiwic2VhcmNoVHh0Iiwic2V0U2VhcmNoVHh0IiwidXNlRWZmZWN0IiwibGVuZ3RoIiwicmVzZXQiLCJpc0V4aXN0Iiwic2VsZWN0SXRlbSIsImZpbmRJbmRleEluQXJyIiwiZGF0YUFyciIsInVzZU1lbW8iLCJkZWVwU2VhcmNoSW5BcnIiLCJpbmRleCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ1c2VTZWxlY3REcm9wZG93bi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3VzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZU1lbW99IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7ZGVlcFNlYXJjaEluQXJyfSBmcm9tICcuLi9oZWxwZXJzL2RlZXBTZWFyY2hJbkFycic7XG5pbXBvcnQge2ZpbmRJbmRleEluQXJyfSBmcm9tICcuLi9oZWxwZXJzL2ZpbmRJbmRleEluQXJyJztcbmltcG9ydCB7aXNFeGlzdH0gZnJvbSAnLi4vaGVscGVycy9pc0V4aXN0JztcblxuZXhwb3J0IGNvbnN0IHVzZVNlbGVjdERyb3Bkb3duID0gKGRhdGEsIGRlZmF1bHRWYWx1ZUJ5SW5kZXgsIGRlZmF1bHRWYWx1ZSwgZGlzYWJsZWRJbnRlcm5hbFNlYXJjaCkgPT4ge1xuICBjb25zdCBbc2VsZWN0ZWRJdGVtLCBzZXRTZWxlY3RlZEl0ZW1dID0gdXNlU3RhdGUobnVsbCk7IC8vIHNlbGVjdGVkIGl0ZW0gZnJvbSBkcm9wZG93blxuICBjb25zdCBbc2VsZWN0ZWRJbmRleCwgc2V0U2VsZWN0ZWRJbmRleF0gPSB1c2VTdGF0ZSgtMSk7IC8vIGluZGV4IG9mIHNlbGVjdGVkIGl0ZW0gZnJvbSBkcm9wZG93blxuICBjb25zdCBbc2VhcmNoVHh0LCBzZXRTZWFyY2hUeHRdID0gdXNlU3RhdGUoJycpO1xuXG4gIC8vIGRhdGEgYXJyYXkgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgfSwgW2RhdGFdKTtcblxuICAvLyBkZWZhdWx0IHZhbHVlIGJ5IGluZGV4IGFkZGVkIG9yIGNoYW5nZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBkZWZhdWx0VmFsdWVCeUluZGV4IG1heSBiZSBlcXVhbHMgemVyb1xuICAgIGlmIChpc0V4aXN0KGRlZmF1bHRWYWx1ZUJ5SW5kZXgpKSB7XG4gICAgICBpZiAoZGF0YSAmJiBpc0V4aXN0KGRhdGFbZGVmYXVsdFZhbHVlQnlJbmRleF0pKSB7XG4gICAgICAgIHNlbGVjdEl0ZW0oZGVmYXVsdFZhbHVlQnlJbmRleCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbZGVmYXVsdFZhbHVlQnlJbmRleF0pO1xuICAvLyBkZWZhdWx0IHZhbHVlIGFkZGVkIG9yIGNoYW5nZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBkZWZhdWx0VmFsdWUgbWF5IGJlIGVxdWFscyB6ZXJvXG4gICAgaWYgKGlzRXhpc3QoZGVmYXVsdFZhbHVlKSkge1xuICAgICAgaWYgKGRhdGEgJiYgZmluZEluZGV4SW5BcnIoZGVmYXVsdFZhbHVlLCBkYXRhKSA+PSAwKSB7XG4gICAgICAgIHNlbGVjdEl0ZW0oZmluZEluZGV4SW5BcnIoZGVmYXVsdFZhbHVlLCBkYXRhKSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbZGVmYXVsdFZhbHVlXSk7XG5cbiAgY29uc3QgZGF0YUFyciA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChkaXNhYmxlZEludGVybmFsU2VhcmNoKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIHNlYXJjaFR4dCA/IGRlZXBTZWFyY2hJbkFycihzZWFyY2hUeHQsIGRhdGEpIDogZGF0YTtcbiAgfSwgW2RhdGEsIHNlYXJjaFR4dF0pO1xuXG4gIGNvbnN0IHNlbGVjdEl0ZW0gPSBpbmRleCA9PiB7XG4gICAgc2V0U2VsZWN0ZWRJdGVtKGRhdGFbaW5kZXhdKTtcbiAgICBzZXRTZWxlY3RlZEluZGV4KGluZGV4KTtcbiAgfTtcblxuICBjb25zdCByZXNldCA9ICgpID0+IHtcbiAgICBzZXRTZWxlY3RlZEl0ZW0obnVsbCk7XG4gICAgc2V0U2VsZWN0ZWRJbmRleCgtMSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBkYXRhQXJyLFxuICAgIHNlbGVjdGVkSXRlbSxcbiAgICBzZWxlY3RlZEluZGV4LFxuICAgIHNlbGVjdEl0ZW0sXG4gICAgcmVzZXQsXG4gICAgc2VhcmNoVHh0LFxuICAgIHNldFNlYXJjaFR4dCxcbiAgfTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGdCQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxlQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxRQUFBLEdBQUFILE9BQUE7QUFFTyxJQUFNSSxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQWlCQSxDQUFJQyxJQUFJLEVBQUVDLG1CQUFtQixFQUFFQyxZQUFZLEVBQUVDLHNCQUFzQixFQUFLO0VBQ3BHLElBQUFDLFNBQUEsR0FBd0MsSUFBQUMsZUFBUSxFQUFDLElBQUksQ0FBQztJQUFBQyxVQUFBLE9BQUFDLGVBQUEsQ0FBQUMsT0FBQSxFQUFBSixTQUFBO0lBQS9DSyxZQUFZ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