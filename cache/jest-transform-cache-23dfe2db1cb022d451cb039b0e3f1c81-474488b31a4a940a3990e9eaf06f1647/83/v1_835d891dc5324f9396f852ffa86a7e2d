919940bc572216d1d8075d3274cfd51b
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _rng = _interopRequireDefault(require("./rng.js"));
var _stringify = require("./stringify.js");
var _nodeId;
var _clockseq;
var _lastMSecs = 0;
var _lastNSecs = 0;
function v1(options, buf, offset) {
  var i = buf && offset || 0;
  var b = buf || new Array(16);
  options = options || {};
  var node = options.node || _nodeId;
  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;
  if (node == null || clockseq == null) {
    var seedBytes = options.random || (options.rng || _rng.default)();
    if (node == null) {
      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];
    }
    if (clockseq == null) {
      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;
    }
  }
  var msecs = options.msecs !== undefined ? options.msecs : Date.now();
  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;
  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000;
  if (dt < 0 && options.clockseq === undefined) {
    clockseq = clockseq + 1 & 0x3fff;
  }
  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {
    nsecs = 0;
  }
  if (nsecs >= 10000) {
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  }
  _lastMSecs = msecs;
  _lastNSecs = nsecs;
  _clockseq = clockseq;
  msecs += 12219292800000;
  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
  b[i++] = tl >>> 24 & 0xff;
  b[i++] = tl >>> 16 & 0xff;
  b[i++] = tl >>> 8 & 0xff;
  b[i++] = tl & 0xff;
  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;
  b[i++] = tmh >>> 8 & 0xff;
  b[i++] = tmh & 0xff;
  b[i++] = tmh >>> 24 & 0xf | 0x10;
  b[i++] = tmh >>> 16 & 0xff;
  b[i++] = clockseq >>> 8 | 0x80;
  b[i++] = clockseq & 0xff;
  for (var n = 0; n < 6; ++n) {
    b[i + n] = node[n];
  }
  return buf || (0, _stringify.unsafeStringify)(b);
}
var _default = v1;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcm5nIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfc3RyaW5naWZ5IiwiX25vZGVJZCIsIl9jbG9ja3NlcSIsIl9sYXN0TVNlY3MiLCJfbGFzdE5TZWNzIiwidjEiLCJvcHRpb25zIiwiYnVmIiwib2Zmc2V0IiwiaSIsImIiLCJBcnJheSIsIm5vZGUiLCJjbG9ja3NlcSIsInVuZGVmaW5lZCIsInNlZWRCeXRlcyIsInJhbmRvbSIsInJuZyIsIm1zZWNzIiwiRGF0ZSIsIm5vdyIsIm5zZWNzIiwiZHQiLCJFcnJvciIsInRsIiwidG1oIiwibiIsInVuc2FmZVN0cmluZ2lmeSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyJ2MS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCB7IHVuc2FmZVN0cmluZ2lmeSB9IGZyb20gJy4vc3RyaW5naWZ5LmpzJzsgLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG5sZXQgX25vZGVJZDtcblxubGV0IF9jbG9ja3NlcTsgLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG5cblxubGV0IF9sYXN0TVNlY3MgPSAwO1xubGV0IF9sYXN0TlNlY3MgPSAwOyAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBsZXQgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgY29uc3QgYiA9IGJ1ZiB8fCBuZXcgQXJyYXkoMTYpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgbGV0IG5vZGUgPSBvcHRpb25zLm5vZGUgfHwgX25vZGVJZDtcbiAgbGV0IGNsb2Nrc2VxID0gb3B0aW9ucy5jbG9ja3NlcSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbG9ja3NlcSA6IF9jbG9ja3NlcTsgLy8gbm9kZSBhbmQgY2xvY2tzZXEgbmVlZCB0byBiZSBpbml0aWFsaXplZCB0byByYW5kb20gdmFsdWVzIGlmIHRoZXkncmUgbm90XG4gIC8vIHNwZWNpZmllZC4gIFdlIGRvIHRoaXMgbGF6aWx5IHRvIG1pbmltaXplIGlzc3VlcyByZWxhdGVkIHRvIGluc3VmZmljaWVudFxuICAvLyBzeXN0ZW0gZW50cm9weS4gIFNlZSAjMTg5XG5cbiAgaWYgKG5vZGUgPT0gbnVsbCB8fCBjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgY29uc3Qgc2VlZEJ5dGVzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTtcblxuICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjUsIGNyZWF0ZSBhbmQgNDgtYml0IG5vZGUgaWQsICg0NyByYW5kb20gYml0cyArIG11bHRpY2FzdCBiaXQgPSAxKVxuICAgICAgbm9kZSA9IF9ub2RlSWQgPSBbc2VlZEJ5dGVzWzBdIHwgMHgwMSwgc2VlZEJ5dGVzWzFdLCBzZWVkQnl0ZXNbMl0sIHNlZWRCeXRlc1szXSwgc2VlZEJ5dGVzWzRdLCBzZWVkQnl0ZXNbNV1dO1xuICAgIH1cblxuICAgIGlmIChjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC4yLjIsIHJhbmRvbWl6ZSAoMTQgYml0KSBjbG9ja3NlcVxuICAgICAgY2xvY2tzZXEgPSBfY2xvY2tzZXEgPSAoc2VlZEJ5dGVzWzZdIDw8IDggfCBzZWVkQnl0ZXNbN10pICYgMHgzZmZmO1xuICAgIH1cbiAgfSAvLyBVVUlEIHRpbWVzdGFtcHMgYXJlIDEwMCBuYW5vLXNlY29uZCB1bml0cyBzaW5jZSB0aGUgR3JlZ29yaWFuIGVwb2NoLFxuICAvLyAoMTU4Mi0xMC0xNSAwMDowMCkuICBKU051bWJlcnMgYXJlbid0IHByZWNpc2UgZW5vdWdoIGZvciB0aGlzLCBzb1xuICAvLyB0aW1lIGlzIGhhbmRsZWQgaW50ZXJuYWxseSBhcyAnbXNlY3MnIChpbnRlZ2VyIG1pbGxpc2Vjb25kcykgYW5kICduc2VjcydcbiAgLy8gKDEwMC1uYW5vc2Vjb25kcyBvZmZzZXQgZnJvbSBtc2Vjcykgc2luY2UgdW5peCBlcG9jaCwgMTk3MC0wMS0wMSAwMDowMC5cblxuXG4gIGxldCBtc2VjcyA9IG9wdGlvbnMubXNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXNlY3MgOiBEYXRlLm5vdygpOyAvLyBQZXIgNC4yLjEuMiwgdXNlIGNvdW50IG9mIHV1aWQncyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjdXJyZW50IGNsb2NrXG4gIC8vIGN5Y2xlIHRvIHNpbXVsYXRlIGhpZ2hlciByZXNvbHV0aW9uIGNsb2NrXG5cbiAgbGV0IG5zZWNzID0gb3B0aW9ucy5uc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc2VjcyA6IF9sYXN0TlNlY3MgKyAxOyAvLyBUaW1lIHNpbmNlIGxhc3QgdXVpZCBjcmVhdGlvbiAoaW4gbXNlY3MpXG5cbiAgY29uc3QgZHQgPSBtc2VjcyAtIF9sYXN0TVNlY3MgKyAobnNlY3MgLSBfbGFzdE5TZWNzKSAvIDEwMDAwOyAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG5cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfSAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG5cblxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfSAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG5cblxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1dWlkLnYxKCk6IENhbid0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlY1wiKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTsgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG5cbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7IC8vIGB0aW1lX2xvd2BcblxuICBjb25zdCB0bCA9ICgobXNlY3MgJiAweGZmZmZmZmYpICogMTAwMDAgKyBuc2VjcykgJSAweDEwMDAwMDAwMDtcbiAgYltpKytdID0gdGwgPj4+IDI0ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bCAmIDB4ZmY7IC8vIGB0aW1lX21pZGBcblxuICBjb25zdCB0bWggPSBtc2VjcyAvIDB4MTAwMDAwMDAwICogMTAwMDAgJiAweGZmZmZmZmY7XG4gIGJbaSsrXSA9IHRtaCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRtaCAmIDB4ZmY7IC8vIGB0aW1lX2hpZ2hfYW5kX3ZlcnNpb25gXG5cbiAgYltpKytdID0gdG1oID4+PiAyNCAmIDB4ZiB8IDB4MTA7IC8vIGluY2x1ZGUgdmVyc2lvblxuXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMTYgJiAweGZmOyAvLyBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGAgKFBlciA0LjIuMiAtIGluY2x1ZGUgdmFyaWFudClcblxuICBiW2krK10gPSBjbG9ja3NlcSA+Pj4gOCB8IDB4ODA7IC8vIGBjbG9ja19zZXFfbG93YFxuXG4gIGJbaSsrXSA9IGNsb2Nrc2VxICYgMHhmZjsgLy8gYG5vZGVgXG5cbiAgZm9yIChsZXQgbiA9IDA7IG4gPCA2OyArK24pIHtcbiAgICBiW2kgKyBuXSA9IG5vZGVbbl07XG4gIH1cblxuICByZXR1cm4gYnVmIHx8IHVuc2FmZVN0cmluZ2lmeShiKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjE7Il0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUQsT0FBQTtBQUtBLElBQUlFLE9BQU87QUFFWCxJQUFJQyxTQUFTO0FBR2IsSUFBSUMsVUFBVSxHQUFHLENBQUM7QUFDbEIsSUFBSUMsVUFBVSxHQUFHLENBQUM7QUFFbEIsU0FBU0MsRUFBRUEsQ0FBQ0MsT0FBTyxFQUFFQyxHQUFHLEVBQUVDLE1BQU0sRUFBRTtFQUNoQyxJQUFJQyxDQUFDLEdBQUdGLEdBQUcsSUFBSUMsTUFBTSxJQUFJLENBQUM7RUFDMUIsSUFBTUUsQ0FBQyxHQUFHSCxHQUFHLElBQUksSUFBSUksS0FBSyxDQUFDLEVBQUUsQ0FBQztFQUM5QkwsT0FBTyxHQUFHQSxPQUFPLElBQUksQ0FBQyxDQUFDO0VBQ3ZCLElBQUlNLElBQUksR0FBR04sT0FBTyxDQUFDTSxJQUFJLElBQUlYLE9BQU87RUFDbEMsSUFBSVksUUFBUSxHQUFHUCxPQUFPLENBQUNPLFFBQVEsS0FBS0MsU0FBUyxHQUFHUixPQUFPLENBQUNPLFFBQVEsR0FBR1gsU0FBUztFQUk1RSxJQUFJVSxJQUFJLElBQUksSUFBSSxJQUFJQyxRQUFRLElBQUksSUFBSSxFQUFFO0lBQ3BDLElBQU1FLFNBQVMsR0FBR1QsT0FBTyxDQUFDVSxNQUFNLElBQUksQ0FBQ1YsT0FBTyxDQUFDVyxHQUFHLElBQUlBLFlBQUcsR0FBRztJQUUxRCxJQUFJTCxJQUFJLElBQUksSUFBSSxFQUFFO01BRWhCQSxJQUFJLEdBQUdYLE9BQU8sR0FBRyxDQUFDYyxT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